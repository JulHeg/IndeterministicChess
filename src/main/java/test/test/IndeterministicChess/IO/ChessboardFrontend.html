<html>
<head>
<title>Indeterministic front end</title>
<link rel="stylesheet" href="ChessboardFrontend.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>
	function sendPressedMessage(x, y) {
		/*$.ajax({
			type:"POST",
			url: "http://localhost:8080/buttonPressed",
		    data: JSON.stringify({ "xPos": x, "yPos" : y }),
		    dataType: "json"
			});*/
			$.ajax({
				type:"POST",
				url: ("http://localhost:8080/buttonPressed?xPos="+x+"&yPos="+y),
			    data: JSON.stringify({ "xPos": x, "yPos" : y }),
			    dataType: "json"
				});
	}

        $.get("http://localhost:8080/greeting",
          function(data){
        	var rows = data.content.split("\n");
        	var content = '<table class="chessboard" id="chessboard">';
         	for(y=1; y <= 8; y++){
         		content += "<tr>";
             	for(x=1; x <= 8; x++){
             		content += '<td><button type="button" class="SquareButtons" id="Square' + x + "_" + y + '" onClick="sendPressedMessage(' + x + "," + y + ');">' + rows[y-1].charAt(x-1) + '</button></td>';
             	}
         		content += "</tr>";
         	}
       		content += "</table>";
            $("#chessboardDiv").append(content); 
          });
    </script>
</head>
<body>
	<div id="appContainer" class="appContainer">
		<div class="w3-progress-container">
		  <div class="w3-progressbar" style="width:10%"></div>
		</div>
		<div id="chessboardDiv"></div>
		<div id="ButtonContainer" class="ButtonContainer">
			<button type="button" class="MenuButtons" id="moveButton" onClick="">Move</button>
			<button type="button" class="MenuButtons" id="splitButton" onClick="">Split</button>
			<button type="button" class="MenuButtons" id="redetermineButton" onClick="">Redetermine</button>
			<button type="button" class="MenuButtons" id="endButton" onClick="">End Move</button>
		</div>
	</div>
</body>
</html>